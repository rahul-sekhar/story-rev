<section id="order">
  <h2>Order</h2>
  
  <ul class="progress">
    <li<%= class_if @order.step == 1, "current" %>>Delivery Options</li>
    <li>></li>
    <li<%= class_if @order.step == 2, "current" %>>Payment Options</li>
    <li>></li>
    <li<%= class_if @order.step == 3, "current" %>>Address</li>
    <li>></li>
    <li<%= class_if @order.step == 4, "current" %>>Confirm</li>
  </ul>
  
  <%= simple_form_for @order,
    :url => order_path,
    :method => "post",
    :defaults => { :required => false, :error => false } do |f|
  %>
    
    <div class="form-container">
    
      <% if @order.errors.size > 0 %>
        <p class="error">You haven't filled in some required fields</p>
      <% end %>
      
      <%= render "step_#{@order.step}", :f => f %>
    </div>
    
    <%= f.hidden_field :next_step, :value => (@order.step + 1) %>
    <% if @order.step == 4 %>
      <%= f.submit "Confirm", :class => "next button" %>
    <% else %>
      <%= f.submit "Next", :class => "next button" %>
    <% end %>
  <% end %>
  
  <% unless @order.first_step? %>
    <%= simple_form_for @order, :url => order_path, :method => :post do |f| %>
      <%= f.hidden_field :next_step, :value => (@order.step - 1) %>
      <%= f.submit "Back", :class => "back button" %>
    <% end %>
  <% end %>
  
  <%= form_for destroy_order_path, :method => :delete, :html => { :id => "cancel-order" } do |f| %>
    <%= f.submit "Cancel", :class => "cancel button" %>
  <% end %>
</section>
